# Overview

This is a WhatsApp bot pairing service called "BWM XMD Scanner" by Ibrahim Adams. The application provides two methods for connecting WhatsApp bots: QR code scanning and phone number pairing. It includes a web interface for users to link their WhatsApp accounts to bot services using the Baileys WhatsApp library. The service generates temporary authentication sessions and provides visual feedback through modern web interfaces with animated gradients and glassmorphism design elements.

# User Preferences

Preferred communication style: Simple, everyday language.

# System Architecture

## Frontend Architecture
The application uses server-rendered HTML pages with embedded CSS and JavaScript for the user interface. Three main interfaces are provided:
- **Landing page** (`main.html`) - Modern gradient design with navigation options and animated background effects
- **QR Scanner** (`qr.html`) - Real-time QR code generation and display with auto-refresh functionality
- **Phone Pairing** (`pair.html`) - Phone number input form for pairing with validation

The frontend employs contemporary web design patterns with pastel rainbow gradients, glassmorphism effects, floating animations, and responsive layouts using CSS Grid and Flexbox. All interfaces feature consistent theming with custom CSS properties and smooth animations.

## Backend Architecture
Built on **Node.js with Express.js** framework following a modular routing structure:
- **Main server** (`index.js`) - Entry point handling middleware, directory setup, and session cleanup
- **Route handlers** - Separate modules for QR (`routes/qr.js`) and pairing (`routes/pair.js`) functionality
- **Utility modules** - ID generation (`utils/id.js`) for unique session identifiers
- **Template system** - HTML templates stored in `/views` directory for consistent UI

The architecture implements a stateless design where each pairing session creates temporary authentication files that are automatically cleaned up after use or timeout. The server includes robust error handling and automatic directory management.

## Session Management
**Baileys WhatsApp Library** (@whiskeysockets/baileys v6.7.18) integration provides:
- Multi-device authentication state management using `useMultiFileAuthState`
- Temporary session storage in `/temp` and `/sessions` directories with unique IDs
- Automatic cleanup of expired sessions (older than 1 hour)
- QR code generation using `qrcode` library for device linking
- Phone number verification and pairing code generation
- WebSocket-based connection handling with automatic reconnection

Sessions are isolated using unique identifiers generated by the `makeid()` utility and stored in temporary directories that are automatically removed after successful pairing, connection timeout, or server restart.

## File System Management
The application includes comprehensive file system operations:
- **Directory Management** - Automatic creation of required directories (`sessions`, `qr_sessions`, `public`, `views`)
- **Session Cleanup** - Scheduled removal of old authentication files and temporary directories
- **Static File Serving** - Express middleware for serving HTML templates and assets
- **Temporary File Handling** - Secure creation and deletion of authentication state files

## External Dependencies

- **@whiskeysockets/baileys** - WhatsApp Web API implementation for multi-device authentication
- **Express.js** - Web framework for HTTP server and routing
- **qrcode** - QR code generation library for visual device pairing
- **fs-extra** - Enhanced file system operations with promise support
- **pino** - Fast JSON logger for connection events and debugging
- **body-parser** - HTTP request body parsing middleware
- **awesome-phonenumber** - Phone number validation and formatting
- **uuid** - Unique identifier generation for sessions
- **pm2** - Process manager for production deployment and monitoring

The application is configured for deployment on cloud platforms with proper port binding and process management through PM2 for production environments.